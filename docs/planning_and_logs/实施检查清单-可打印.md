# StS AI 开发 — 实施检查清单（可打印 / 勾选）

按顺序执行，完成一项勾选一项。

---

## 阶段 0：环境与 Mod

- [ ] 1. 在 Steam 中找到 StS 本地安装路径并记录。
- [ ] 2. 下载并安装 ModTheSpire，确认能从 Steam 启动带 Mod 的 StS。
- [ ] 3. 确定「状态暴露」方案：安装现成 Mod 或自己写最小 Mod，把当前战斗状态写入 JSON 或发到本地端口。
- [ ] 4. 实现并验证：Mod 在每回合（或每步）能稳定输出状态到指定路径/端口。
- [ ] 5. 在本机创建 Python 项目目录与 venv，安装 pyautogui、pynput 及后续需要的库。
- [ ] 6. 编写并运行「读状态」脚本，在 Steam 启动 StS 并进入一场战斗时，确认 Python 能持续读到与游戏一致的状态。
- [ ] 7. 编写并运行「发键鼠」脚本，在 StS 前台时能通过脚本发送按键/点击并让游戏有反应。
- [ ] 8. 确定窗口与焦点策略（分辨率是否固定等）。

**阶段 0 完成标准**：从 Steam 打开 StS，进一场战斗，Python 能读状态并能用脚本发键鼠出牌。

---

## 阶段 1：战斗日志与数据管线

- [ ] 9. 定义战斗日志的 JSON/CSV 格式（回合号、手牌、费用、敌人意图、本回合出牌、回合结束血量等）。
- [ ] 10. 在 Mod 或 Python 中实现按该格式写入战斗日志。
- [ ] 11. 固定「静默 vs Jaw Worm」，用规则出牌自动打 50～100 场并记录完整日志。
- [ ] 12. 抽查日志，确认与真实对局一致，必要时修正写日志逻辑。

**阶段 1 完成标准**：有一批格式统一、可解析的「静默 vs Jaw Worm」战斗日志。

---

## 阶段 2：第一个可训练的「战斗决策」小模型

- [ ] 13. 写脚本将日志转为「状态向量 + 动作」的训练数据。
- [ ] 14. 定义状态向量维度和动作空间（离散动作列表）。
- [ ] 15. 用 PyTorch（或其它框架）实现 2～3 层 MLP，输入=状态，输出=动作，参数量几十万级。
- [ ] 16. 用转换后的数据训练该 MLP，在留出集上评估准确率/top-k。
- [ ] 17. （可选）用训练好的模型在「静默 vs Jaw Worm」真机对局中自动出牌，观察胜率/血量。

**阶段 2 完成标准**：有一个针对「静默 vs Jaw Worm」的小模型，能在本地训练并能（可选）在真机自动出牌。

---

## 阶段 3：多敌人、多战、路线与 RL（可选）

- [ ] 18. 扩展状态与日志格式以支持多敌人、层/节点；实现自动打完第 1 层的流程。
- [ ] 19. （可选）将 StS 真机包成 RL 环境并接 Stable-Baselines3，或先用更多日志做模仿学习再考虑 RL。
- [ ] 20. 若需 7×24 训练，配置 Mac Mini 上长时间运行 StS + 训练脚本的启动方式与资源占用。

---

*完整说明见：StS_AI开发计划-细颗粒度实施指南.md*
